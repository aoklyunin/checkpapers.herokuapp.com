# Проверка статей на уникальность

Это тестовое задание

## Текст задания
**Пример**: Имеется вебсайт, на котором пользователи могут писать статьи, которые будут видны всем посетителям данного сайта.

**Задача**: Используя все доступные методы проверять правдивость и уникальность данной информации, а затем выводить степень
ее уникальности и правдивости.

Приложение может быть реализовано на любом яп.
Проверка будет производится в любом удобном вам окружении (веб интерфейс,пк, и т.д. при соблюдении ограничений),
интерфейс должен содержать окно для ввода информации на входе, и результат оценки на выходе
Результат измерения степени уникальности и правдивости информации может выводиться в свободной форме.

**Ограничения**: 
- на обработку статьи отмеряется 60 минут;
- хостинг, юникс/windows, интернет канал: 1гигабит, носитель 1тб;
- Время на реализацию не ограничено, но скорость исполнения приветствуется.

## Архитектура приложения

Приложение реализовано на Django CMS, представляет собой веб-сайт.

Проверка на оригинальность и правдоподобность текста статьи выполнена методом шилдов. 
Метод шилдов представляет собой разбиение строки на подстроки заданной длины **n** 
таким образом, чтобы каждая следующая пдстрока включала первое не входящее в неё слова из 
последующих символов и исключала первое входящее, первая подстрока составляется 
из первых **n** слов. В данном приложении **n=5**

Оригинальность текста рассчитывается как отношение не встреченных в других текстах
шилдов к общему кол-ву шилдов. Правдоподобность рассчитывается как отношение количества
шилдов, встреченных хотя бы в трёх различных источниках, к общему количеству шилдов.

Демонстрационный сайт развёрнут при помощи облачного сервиса **heroku**. 
[Перейти](http://checkpapers.herokuapp.com/)

Поиск выполнен при помощи пакета **selenium** в поисковой системе **Yandex**, у **Google** 
очень хитрая система проверки капчи с исчезающими картинками, поэтому было решено 
использовать **Yandex** - там простые картинки и код.

База данных находится на **heroku**, поэтому менять настройки базы и создавать локальную
нет необходимости.

Разделы сайта:
- Главная - стартовая страница сайта
- Статьи - список всех статей, загруженных пользователями
- Мои статьи - список всех статей, загруженных текущим пользователем
- Проверить - страница с интерфейсом загрузки текста статьи на проверку
- О проекте - страница с информацией о проекте

Разделы "Мои статьи" и "Проверить" доступны только авторизованным пользователям.

## Алгоритмы

Сначала выполняется сравнение статьи с загруженными на сайт, потом с текстами на сайтах,
ссылки на которые получены в результате поисковых запросов по шилдам исходной статьи.

Непосредственные алгоритмы проверки статей на уникальность находятся в скрипте
**misc.check_papers**

Для автоматической проверки статей используется скрипт.
```
python mange.py load_wiki_textes num_of_papers
```

Этот метод загружает заданное кол-во(num_of_papers)  случайных статей из википедии и проверяет их. Поиск по шилдам 
в этом месте организован при помощи [Yandex XML](https://xml.yandex.ru/), потому что в консольном 
режиме ввод капчи затруднён. Для пользователей, авторизовавшихся по телефону, в день
доступно 10000 запросов. У **Google API** жёсткие требования к сайту, которому они предоставляют
функционал **API**, в том числе к доменному имени. Поэтому его использовать не получилось. 

**Yandex XML** даёт доступ только к одному **ip**,
указанному в настройках. Поэтому для запуска этого скрипта Вам необходимо зарегистрироваться
в **Yandex XML** и поменять параметры api в строке из модуля **misc.check_papers**:
```
yandex = yandex_search.Yandex(api_user='ваш id', api_key='ваш ключ')
```
на свои

## Развёртывание приложения

Приложение использует ChromeDriver. Скачать его можно [отсюда](https://chromedriver.chromium.org/).

Установка не требуется, достаточно просто разместить его на локальном диске и добавить 
переменную среды

```
$CHROMEDRIVER_PATH=path/to/chromedriver
```
 
